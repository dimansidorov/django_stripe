# Django Stripe Тестовый Проект

Этот проект представляет собой бэкенд на основе Django, интегрированный с Stripe API. Проект включает следующий функционал и условия:

## Функциональность проекта:

1. **Модель Django "Item"**
   - Содержит поля (name, description, price).

2. **API-эндпоинт GET /buy/{id}**
   - Позволяет получить Stripe Session ID для выбранного товара.
   - При вызове этого эндпоинта из бэкенда с использованием библиотеки Stripe на Python выполняется запрос `stripe.checkout.Session.create(...)` и возвращается полученный `session.id` в качестве ответа.

3. **API-эндпоинт GET /item/{id}**
   - Предоставляет простую HTML-страницу с информацией о выбранном товаре и кнопкой "Купить".
   - При нажатии кнопки "Купить" выполняется запрос на `/buy/{id}`, получение `session_id`, а затем с использованием библиотеки Stripe JS инициируется перенаправление на форму оформления заказа с помощью `stripe.redirectToCheckout(sessionId=session_id)`.

## Стек технологий:

- Python 3.12
- Django 5
- PostgreSQL 16
- Docker

## Настройка проекта

1. Убедитесь, что у вас установлены Docker и docker-compose.

2. Клонируйте репозиторий или загрузите и распакуйте архив. Перейдите в папку проекта.

3. Создайте файл с именем `.env` и добавьте в него переменные из `.env.template`. Заполните переменные, начинающиеся с DB, в соответствии с вашими предпочтениями. Для переменных, начинающихся с STRIPE, вставьте свои публичные и приватные ключи из учетной записи Stripe.

4. Выполните следующую команду для сборки и запуска Docker-контейнеров:

   ```bash
   docker-compose up --build  # если хотите видеть логи контейнера
   ```
   или
   ```bash
   docker-compose up --build -d  # если не хотите видеть логи контейнера
   ```

6. Выполните команду для создания миграций (при необходимости откройте новый терминал):

   ```bash
   docker-compose run --rm web-app sh -c "python manage.py makemigrations"
   ```

7. Выполните команду для применения миграций:

   ```bash
   docker-compose run --rm web-app sh -c "python manage.py migrate"
   ```

8. Выполните команду для загрузки фикстур:

   ```bash
   docker-compose run --rm web-app sh -c "python manage.py loaddata ../db.json"
   ```

   > Фикстуры создают суперпользователя с логином 'admin' и паролем 'admin', а также 10 тестовых товаров.

Теперь вы можете тестировать проект.

## Лицензия

MIT License
